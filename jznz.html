<meta name='viewport' content='width=device-width, initial-scale=1'/><meta name='viewport' content='width=device-width, initial-scale=1'/><!DOCTYPE html>
<html lang="my">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Event 1</title>
<style>
  *{margin:0;padding:0;box-sizing:border-box;}
  body{font-family:Arial,sans-serif;overflow:hidden;}

  /* Main Screen */
  #main-screen{
    width:100vw;height:100vh;
    background-image:url('https://iili.io/KXa9dIj.jpg');
    background-size:cover;background-position:center;
    position:relative;
  }

  /* Token & Coin Bubble */
  .token-card{
    position:absolute;top:10px;left:10px;
    min-width:80px;height:40px;
    background:black;border-radius:20px;
    display:flex;align-items:center;justify-content:center;
    padding:0 10px;color:white;font-weight:bold;font-size:14px;
    gap:5px;
    z-index:10;
  }
  .token-card img{width:30px;height:auto;}
  .token-card .count{color:white;font-weight:bold;font-size:14px;}

  /* Buttons */
  .buttons{
    position:absolute;top:50%;right:10px;
    transform:translateY(-50%);
    display:flex;flex-direction:column;gap:10px;
  }
  .btn{padding:6px 12px;font-size:13px;border:none;border-radius:6px;background:#007bff;color:white;cursor:pointer;transition:0.3s;}
  .btn:hover{background:#0056b3;}
  .btn:disabled{background:#6c757d;cursor:not-allowed;}

/* Event Screen */
#event-screen {
  display: block; /* á€…á€™á€ºá€¸á€á€•á€ºá€›á€”á€º display none á€€á€­á€¯ block á€œá€¯á€•á€ºá€‘á€¬á€¸ */
  width: 100vw;
  height: 100vh;
  background-image: url('https://iili.io/KXaM3J4.gif');
  background-size: cover;
  background-position: center;
  position: relative;
}

/* Box á€¡á€•á€±á€« */
.event-box {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 180px;
  height: 180px;
  background-image: url('https://iili.io/KVz8LZJ.png');
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  z-index: 5;
}

/* á€¡á€á€¼á€¬á€¸ GIF overlay (optional) */
#screen2-gif {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: none;
  background-size: cover;
  background-position: center;
  z-index: 10;
}

  .open-btn{
    position:absolute;bottom:80px;left:50%;
    transform:translateX(-50%);
    padding:12px 24px;font-size:16px;border:none;border-radius:8px;background:#007bff;color:white;cursor:pointer;transition:0.3s;
    z-index:5;
  }
  .open-btn:hover{background:#0056b3;}

  .back-btn{
    position:absolute;top:20px;left:20px;
    padding:8px 16px;font-size:14px;border:none;border-radius:6px;background:#007bff;color:white;
    cursor:pointer;display:flex;align-items:center; z-index:5;
  }
  .back-btn:hover{background:#0056b3;}
  .back-btn::before{content:'â†';margin-right:6px;font-size:16px;}

  .reward-popup{
    position:absolute;top:50%;left:50%;
    transform:translate(-50%,-50%);
    display:none;flex-direction:column;align-items:center;
    background:rgba(0,0,0,0.7);padding:20px;border-radius:12px;
    color:white;font-size:18px;font-weight:bold;text-align:center;
    z-index:20;
  }
  .reward-popup img{width:80px;height:80px;margin-bottom:10px;}
  .reward-popup .close-btn{
    margin-top:10px;padding:6px 12px;font-size:14px;border:none;border-radius:6px;background:#007bff;color:white;cursor:pointer;
  }
  .reward-popup .close-btn:hover{background:#0056b3;}

/* Main Layout Reset */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: Arial, sans-serif;
  overflow: hidden;
}

/* Exchange Screen Base */
#exchange-screen {
  display: block;
  width: 100vw;
  height: 100vh;
  background-image: url('https://iili.io/KjAUn87.jpg');
  background-size: cover;
  background-position: center;
  position: relative;
  color: white;
  overflow-y: auto;
}

/* Exchange Header */
.exchange-header {
  text-align: center;
  margin-top: 20px;
  background: rgba(0, 0, 0, 0.6);
  padding: 15px 30px;
  border-radius: 12px;
}

.exchange-header h2 {
  font-size: 28px;
  margin: 0;
  text-shadow: 0 2px 4px rgba(0,0,0,0.5);
}

/* Exchange Cards Container */
.exchange-items-container {
  width: 100%;
  padding: 20px;
  background: rgba(0, 0, 0, 0.7);
  border-radius: 20px 20px 0 0;
  margin-top: 20px;
}

.exchange-cards {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 20px;
  justify-items: center;
  align-items: start;
  max-width: 700px;
  margin: 0 auto;
}

.exchange-card {
  background: rgba(0, 0, 0, 0.7);
  border-radius: 12px;
  padding: 15px;
  width: 100%;
  max-width: 300px;
  text-align: center;
  display: flex;
  flex-direction: column;
  align-items: center;
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.exchange-card img {
  width: 100%;
  border-radius: 8px;
  margin-bottom: 10px;
}

.exchange-card p {
  margin: 8px 0;
  font-size: 14px;
  min-height: 40px;
  display: flex;
  align-items: center;
}

/* Back Button */
.back-btn {
  position: absolute;
  top: 20px;
  left: 20px;
  padding: 8px 16px;
  font-size: 14px;
  border: none;
  border-radius: 6px;
  background: #007bff;
  color: white;
  cursor: pointer;
  display: flex;
  align-items: center;
  z-index: 5;
}

.back-btn:hover {
  background: #0056b3;
}

.back-btn::before {
  content: 'â†';
  margin-right: 6px;
  font-size: 16px;
}

/* ============================= */
/* ğŸ§¡ Anime Girl + Typing Chat  */
/* ============================= */

#exchange-chat-container {
  position: absolute;
  bottom: 5px;
  left: 50%;
  transform: translateX(-50%);
  width: 200%;
  display: flex;
  justify-content: center;
  align-items: flex-end;
  z-index: 10;
  pointer-events: none;
}

/* Anime Girl */
#exchange-chat-icon {
  width: 400px;
  height: auto;
  border-radius: 3px;
  pointer-events: none;
  filter: drop-shadow(0 4px 10px rgba(0,0,0,0.5));
  transition: transform 0.3s ease;
}

#exchange-chat-icon:hover {
  transform: scale(1.05);
}

/* ğŸ†™ Chat Text á€€á€­á€¯ Anime á€•á€±á€«á€ºá€¡á€•á€±á€«á€ºá€á€„á€ºá€‘á€¬á€¸á€™á€šá€º */
#exchange-chat-text {
  position: absolute;
  top: 250px; /* ğŸ†™ á€¡á€•á€±á€«á€ºá€†á€¯á€¶á€¸á€™á€¾á€¬á€á€„á€º */
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0, 0, 0, 0.6);
  color: white;
  padding: 12px 24px;
  border-radius: 20px;
  font-size: 17px;
  font-weight: bold;
  text-align: center;
  box-shadow: 0 0 12px rgba(0,0,0,0.6);
  max-width: 360px;
  width: 90%;
  line-height: 1.4em;
  overflow: hidden;
  white-space: normal;
  transition: opacity 0.3s ease;
  pointer-events: auto;
  z-index: 20;
}

/* á€œá€­á€™á€¹á€™á€±á€¬á€ºá€›á€±á€¬á€„á€º link */
#exchange-chat-text .exchange-link {
  color: #ffae00;
  text-decoration: underline;
  cursor: pointer;
  transition: color 0.3s ease;
}

#exchange-chat-text .exchange-link:hover {
  color: #ffd35b;
}

/* Scrollbar Hidden */
::-webkit-scrollbar {
  width: 0;
  height: 0;
}
/* âŒ Media query á€–á€»á€€á€ºá€œá€­á€¯á€€á€º -- Android á€™á€¾á€¬á€œá€² á‚ á€€á€½á€€á€ºá€•á€²á€€á€»á€”á€º */
  
  /* Task Screen */
  #task-screen{
    display:none;width:100vw;height:100vh;
    background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
    position:relative;color:white;
    padding:20px;
    overflow-y: auto;
  }

  .task-header {
    text-align: center;
    margin-bottom: 20px;
    padding-top: 20px;
  }

  .task-header h2 {
    font-size: 24px;
    margin-bottom: 10px;
    text-shadow: 0 2px 4px rgba(0,0,0,0.5);
  }

  .task-header p {
    font-size: 14px;
    opacity: 0.8;
  }

  .task-list{
    margin-top: 20px;
    display:flex;flex-direction:column;gap:15px;
    padding-bottom: 30px;
  }
  .task-item{
    background: rgba(255,255,255,0.1);
    backdrop-filter: blur(10px);
    padding:15px;border-radius:12px;
    display:flex;justify-content:space-between;align-items:center;
    transition: all 0.3s ease;
    border: 1px solid rgba(255,255,255,0.2);
  }

  .task-item:hover {
    transform: translateY(-3px);
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
  }

  .task-info h3{
    margin-bottom:5px;
    font-size: 16px;
  }
  .task-info p{
    font-size:14px;
    color:#ddd;
    margin-bottom: 5px;
  }

  .task-reward {
    display: flex;
    align-items: center;
    gap: 5px;
    margin-top: 5px;
    font-size: 14px;
    color: gold;
  }

  .task-reward img {
    width: 16px;
    height: 16px;
  }

  .task-completed{
    background:rgba(26, 83, 27, 0.7);
    color:#90ee90;
  }
  .task-completed .btn{
    background:#28a745;
  }

  /* Exchange Form */
  .exchange-form{
    position:absolute;top:50%;left:50%;
    transform:translate(-50%,-50%);
    background:rgba(0,0,0,0.8);padding:20px;border-radius:12px;
    color:white;width:300px;display:none;z-index:20;
  }
  .exchange-form h3{text-align:center;margin-bottom:15px;}
  .form-group{margin-bottom:15px;}
  .form-group label{display:block;margin-bottom:5px;font-size:14px;}
  .form-group input{width:100%;padding:8px;border-radius:4px;border:none;}
  .form-buttons{display:flex;gap:10px;justify-content:center;}
  .form-buttons button{padding:8px 16px;border:none;border-radius:4px;cursor:pointer;}
  .confirm-btn{background:#28a745;color:white;}
  .cancel-btn{background:#dc3545;color:white;}

  /* Telegram Success Message */
  .telegram-success{
    position:absolute;top:50%;left:50%;
    transform:translate(-50%,-50%);
    background:rgba(0,0,0,0.8);padding:20px;border-radius:12px;
    color:white;text-align:center;display:none;z-index:30;
  }
  .telegram-success h3{color:#28a745;margin-bottom:10px;}

  /* Timer Display */
  .timer-display{
    position:absolute;
    bottom: 20px;
    left: 50%;
    transform:translateX(-50%);
    background:rgba(0,0,0,0.7);color:white;
    padding:12px 16px;border-radius:8px;font-size:14px;
    text-align: center;
    width: 90%;
    max-width: 400px;
  }

  .timer-display.ready {
    background: rgba(40, 167, 69, 0.7);
    animation: pulse 2s infinite;
  }

  @keyframes pulse {
    0% { box-shadow: 0 0 0 0 rgba(40, 167, 69, 0.7); }
    70% { box-shadow: 0 0 0 10px rgba(40, 167, 69, 0); }
    100% { box-shadow: 0 0 0 0 rgba(40, 167, 69, 0); }
  }

  /* Claim Time Display */
  .claim-time-display {
    font-size: 12px;
    color: #90ee90;
    margin-top: 5px;
    font-style: italic;
  }

  .next-claim-time {
    font-size: 12px;
    color: #ffa500;
    margin-top: 3px;
    font-style: italic;
  }

  /* Countdown Timer Styles */
  .countdown-timer {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
    margin: 10px 0;
    font-size: 16px;
    font-weight: bold;
  }

  .countdown-unit {
    display: flex;
    flex-direction: column;
    align-items: center;
    background: rgba(0, 0, 0, 0.5);
    padding: 8px 12px;
    border-radius: 8px;
    min-width: 60px;
  }

  .countdown-value {
    font-size: 20px;
    color: #ffcc00;
  }

  .countdown-label {
    font-size: 12px;
    color: #ddd;
    margin-top: 4px;
  }

  .ready-to-claim {
    color: #90ee90;
    font-size: 18px;
    font-weight: bold;
    text-align: center;
    margin: 15px 0;
    animation: blink 1.5s infinite;
  }

  @keyframes blink {
    0% { opacity: 1; }
    50% { opacity: 0.5; }
    100% { opacity: 1; }
  }

#chat-container {
  position: fixed; /* scroll á€”á€±á€›á€¬á€™á€¾á€¬á€á€Šá€ºá€”á€±á€…á€± */
  bottom: 0;
  left: 0;
  width: 100%; /* á€¡á€•á€±á€«á€ºá€™á€¾á€¬ á€¡á€á€¼á€¬á€¸ elements á€–á€¯á€¶á€¸á€™á€‘á€¬á€¸á€…á€±á€›á€”á€º */
  height: auto;
  display: flex;
  justify-content: center; /* á€¡á€œá€šá€ºá€á€½á€„á€ºá€‘á€¬á€¸á€á€»á€„á€ºá€›á€„á€º center */
  align-items: flex-end;
  pointer-events: none; /* container á€”á€¾á€„á€·á€ºá€•á€¯á€¶á€€á€­á€¯ click á€™á€–á€¼á€…á€ºá€…á€± */
  z-index: 0; /* á€¡á€á€¼á€¬á€¸ UI á€•á€±á€«á€ºá€™á€¾á€¬á€”á€±á€¬á€€á€ºá€á€¶á€¡á€–á€¼á€…á€º */
}

#chat-icon {
  width: 350px;
  height: 350px;
  border-radius: 50%;
  transform: translateY(20px);
  pointer-events: none; /* click á€™á€–á€¼á€…á€ºá€…á€±á€–á€­á€¯á€· */
}

#chat-icon:hover {
  transform: scale(1.05) translate(-40px, 20px);
}

#chat-text {
  position: absolute;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0, 0, 0, 0.6);
  color: white;
  padding: 12px 24px;
  border-radius: 20px;
  font-size: 22px;
  font-weight: bold;
  text-align: center;
  box-shadow: 0 0 12px rgba(0,0,0,0.6);
  z-index: 999; /* á€•á€¯á€¶á€¡á€•á€±á€«á€ºá€‘á€•á€ºá€–á€­á€¯á€· */
  transition: opacity 0.5s ease;

  width: 90%;              /* á€…á€¬á€á€”á€ºá€¸á€¡á€›á€¾á€Šá€ºá€€á€»á€šá€ºá€¡á€±á€¬á€„á€º */
  max-width: 380px;        /* á€¡á€™á€»á€¬á€¸á€†á€¯á€¶á€¸á€¡á€á€­á€¯á€„á€ºá€¸á€á€á€ºá€™á€¾á€á€º */
  line-height: 1.4em;      /* á€á€”á€ºá€¸á€€á€¼á€¬á€¸á€¡á€”á€Šá€ºá€¸á€„á€šá€ºá€•á€±á€¸ */
  display: -webkit-box;    
  -webkit-line-clamp: 2;   /* á‚ á€á€”á€ºá€¸á€‘á€€á€ºá€™á€•á€­á€¯á€…á€± */
  -webkit-box-orient: vertical;
  overflow: hidden;        /* á‚ á€á€”á€ºá€¸á€€á€»á€±á€¬á€ºá€á€¬á€–á€¼á€á€º */
  text-overflow: ellipsis; /* á€–á€¼á€á€ºá€œá€»á€¾á€„á€º â€¦ á€•á€¼ */
  white-space: normal;     /* á€…á€¬á€¡á€á€½á€„á€ºá€¸ line break á€á€½á€„á€·á€ºá€•á€¼á€¯ */
}

/* Arrow á€€á€­á€¯ á€–á€šá€ºá€›á€¾á€¬á€¸á€‘á€¬á€¸á€”á€­á€¯á€„á€ºá€•á€«á€á€šá€º á€¡á€±á€¬á€€á€ºá€™á€¾á€¬á€™á€œá€­á€¯á€œá€»á€¾á€„á€º */
#chat-text::after {
  content: '';
  position: absolute;
  display: none; /* á€œá€­á€¯á€™á€œá€­á€¯á€¡á€•á€ºá€™á€¾á€ºá€¬á€•á€±á€«á€ºá€™á€•á€¼ */
}

#battle-screen {
  display: none;
  width: 100vw;
  height: 100vh;
  position: fixed;
  top: 0;
  left: 0;
  background-image: url('https://iili.io/KhFjP1V.gif');
  background-size: cover;        /* âœ… á€•á€¯á€¶á€¡á€•á€¼á€Šá€·á€ºá€¡á€”á€€á€ºá€¡á€•á€¼á€Šá€·á€º */
  background-position: center;   /* âœ… á€¡á€œá€šá€ºá€¡á€”á€€á€º */
  background-repeat: no-repeat;
  background-attachment: fixed;  /* âœ… scroll á€™á€–á€¼á€…á€ºá€¡á€±á€¬á€„á€º */
  z-index: 999;
  overflow: hidden;
}



</style>
</head>
<body>

<!-- Main Screen -->
<div id="main-screen">
  <div class="token-card">
    <img src="https://iili.io/KVxjsG1.png" alt="Token">
    <div class="count" id="token-count">0</div>
    <img src="https://iili.io/KVzp01S.png" alt="Coin">
    <div class="count" id="coin-count">0</div>
  </div>

  <div class="buttons">
    <button class="btn" id="event-btn">Event á€á€­á€¯á€·</button>
    <button class="btn" id="task-btn">Task á€™á€»á€¬á€¸</button>
    <button class="btn" id="exchange-btn">á€œá€²á€™á€Šá€º</button>
<button class="btn" id="battle-btn">Green Box</button> 
  </div>
</div>

<!-- Floating Chat Image (Left Bottom) -->
<div id="chat-container">
  <div id="chat-text"></div>
  <img id="chat-icon" src="https://iili.io/KWUOgCN.png" alt="Chat Icon">
</div>

<!-- Event Screen -->
<div id="event-screen">
  <div class="event-box" id="event-box"></div>
  <div id="screen2-gif" style="background-image:url('https://iili.io/KVISLp1.gif');"></div>
  <button class="open-btn" id="open-btn">Open Box</button>
  <button class="back-btn" id="back-btn">Home</button>
  <div class="reward-popup" id="reward-popup">
    <img src="" alt="Reward" id="reward-img">
    <div id="reward-text"></div>
    <button class="close-btn" id="close-reward">á€Ÿá€¯á€á€ºá€•á€¼á€®</button>
  </div>
</div>

<!-- Task Screen -->
<div id="task-screen">
  <button class="back-btn" id="back-task">Home</button>

  <div class="task-header">
    <h2>Task á€™á€»á€¬á€¸</h2>
    <p>Task á€™á€»á€¬á€¸á€•á€¼á€®á€¸á€†á€¯á€¶á€¸á€•á€«á€€ Token Card á€™á€»á€¬á€¸á€›á€›á€¾á€­á€™á€Šá€º</p>
  </div>

  <div class="task-list">
    <div class="task-item" id="task-3hour">
      <div class="task-info">
        <h3>áƒ á€”á€¬á€›á€®á€á€…á€ºá€á€« Token Card á€›á€šá€°á€•á€«</h3>
        <p>áƒ á€”á€¬á€›á€®á€€á€¼á€¬á€á€­á€¯á€„á€ºá€¸ 1 Token Card á€›á€›á€¾á€­á€™á€Šá€º</p>

        <!-- Countdown Timer Section -->
        <div id="countdown-section">
          <div class="countdown-timer" id="countdown-timer">
            <div class="countdown-unit">
              <div class="countdown-value" id="countdown-hours">03</div>
              <div class="countdown-label">á€”á€¬á€›á€®</div>
            </div>
            <div class="countdown-unit">
              <div class="countdown-value" id="countdown-minutes">00</div>
              <div class="countdown-label">á€™á€­á€”á€…á€º</div>
            </div>
            <div class="countdown-unit">
              <div class="countdown-value" id="countdown-seconds">00</div>
              <div class="countdown-label">á€…á€€á€¹á€€á€”á€·á€º</div>
            </div>
          </div>
          <div class="ready-to-claim" id="ready-to-claim" style="display:none;">
            á€‘á€•á€ºá€šá€°á€”á€­á€¯á€„á€ºá€™á€Šá€º!
          </div>
        </div>

        <div class="task-reward">
          <img src="https://iili.io/KVxjsG1.png" alt="Token">
          <span>1 Token Card</span>
        </div>
      </div>
      <button class="btn" id="btn-3hour" disabled>á€™á€›á€á€±á€¸á€•á€«</button>
    </div>
    <div class="task-item" id="task-channel1">
      <div class="task-info">
        <h3>Channel á€á€­á€¯á€· Join á€•á€«</h3>
        <p>https://t.me/StarlarCompany</p>
        <div class="task-reward">
          <img src="https://iili.io/KVxjsG1.png" alt="Token">
          <span>5 Token Card</span>
        </div>
      </div>
      <button class="btn" id="btn-channel1">Join & Claim</button>
    </div>
    <div class="task-item" id="task-channel2">
      <div class="task-info">
        <h3>Channel á€á€­á€¯á€· Join á€•á€«</h3>
        <p>https://t.me/stw27925</p>
        <div class="task-reward">
          <img src="https://iili.io/KVxjsG1.png" alt="Token">
          <span>5 Token Card</span>
        </div>
      </div>
      <button class="btn" id="btn-channel2">Join & Claim</button>
    </div>
    <div class="task-item" id="task-channel3">
      <div class="task-info">
        <h3>Channel á€á€­á€¯á€· Join á€•á€«</h3>
        <p>https://t.me/calvin2k78</p>
        <div class="task-reward">
          <img src="https://iili.io/KVxjsG1.png" alt="Token">
          <span>5 Token Card</span>
        </div>
      </div>
      <button class="btn" id="btn-channel3">Join & Claim</button>
    </div>
    <div class="task-item" id="task-channel4">
      <div class="task-info">
        <h3>Channel á€á€­á€¯á€· Join á€•á€«</h3>
        <p>https://t.me/MythicMart_2</p>
        <div class="task-reward">
          <img src="https://iili.io/KVxjsG1.png" alt="Token">
          <span>5 Token Card</span>
        </div>
      </div>
      <button class="btn" id="btn-channel4">Join & Claim</button>
    </div>

    <!-- NEW: YouTube Subscribe Task -->
    <div class="task-item" id="task-youtube">
      <div class="task-info">
        <h3>YouTube Channel Subscribe á€œá€¯á€•á€ºá€•á€«</h3>
        <p>https://youtube.com/@starlar.1?si=MXHDQE_quqeRN7pA</p>
        <div class="task-reward">
          <img src="https://iili.io/KVxjsG1.png" alt="Token">
          <span>3 Token Card</span>
        </div>
      </div>
      <button class="btn" id="btn-youtube">Subscribe & Claim</button>
    </div>

    <!-- NEW: Telegram Share Task -->
    <div class="task-item" id="task-share">
      <div class="task-info">
        <h3>Telegram á€€ á€™á€­á€á€ºá€†á€½á€±á€™á€»á€¬á€¸á€…á€® áƒ á€á€« Share á€•á€«</h3>
        <p>MLBB Diamonds á€™á€»á€¬á€¸á€€á€­á€¯ á€¡á€á€™á€²á€· á€›á€šá€°á€›á€”á€º Event á€á€½á€„á€ºá€•á€«á€á€„á€ºá€œá€­á€¯á€€á€ºá€•á€« ğŸ’</p>
        <p>https://starlar1.github.io/Event1/</p>
        <div class="task-reward">
          <img src="https://iili.io/KVxjsG1.png" alt="Token">
          <span>3 Token Card</span>
        </div>
      </div>
      <button class="btn" id="btn-share">Share & Claim</button>
    </div>

  </div>
</div>

<!-- Exchange Screen -->
<div id="exchange-screen" style="display: none;">
  <div class="exchange-container">
    <button class="back-btn" id="back-exchange">Home</button>
    

    <!-- Exchange Items Grid (Initially Hidden) -->
    <div class="exchange-items-container" id="exchange-items" style="display: none;">
      <div class="exchange-cards">
        <!-- Existing items -->
        <div class="exchange-card">
          <img src="https://iili.io/KGldYUG.jpg">
          <p>5 Diamond - 3800 Coin Card 5 á€šá€±á€¬á€€á€ºá€á€¬á€œá€²á€”á€­á€¯á€„á€º</p>
          <button class="btn exchange-item" data-diamond="5" data-coins="1500">á€œá€²á€™á€Šá€º</button>
        </div>
        <div class="exchange-card">
          <img src="https://iili.io/KGlFqle.jpg">
          <p>11 Diamond - 7800 Coin Card 5 á€šá€±á€¬á€€á€ºá€á€¬á€œá€²á€”á€­á€¯á€„á€º</p>
          <button class="btn exchange-item" data-diamond="11" data-coins="2500">á€œá€²á€™á€Šá€º</button>
        </div>
        <div class="exchange-card">
          <img src="https://iili.io/KGlfSK7.jpg">
          <p>50 + 50 Diamond - 20000 Coin Card 1 á€šá€±á€¬á€€á€ºá€á€¬á€œá€²á€”á€­á€¯á€„á€º</p>
          <button class="btn exchange-item" data-diamond="100" data-coins="10000">á€œá€²á€™á€Šá€º</button>
        </div>
        
               <!-- NEW: Wp Pass Item -->
        <div class="exchange-card">
          <img src="https://iili.io/KjVZcW7.jpg">
          <p>Wp Pass - 35000 Coin Card 1 á€šá€±á€¬á€€á€ºá€á€¬á€œá€²á€”á€­á€¯á€„á€º</p>
          <button class="btn exchange-item" data-diamond="0" data-coins="35000" data-item="Wp Pass">á€œá€²á€™á€Šá€º</button>
        </div>
        
        
        <!-- New items -->
        <div class="exchange-card">
          <img src="https://iili.io/KhdF7sa.jpg">
          <p>YUI 300 Coins - 100 á€šá€±á€¬á€€á€ºá€á€¬á€œá€²á€”á€­á€¯á€„á€º</p>
          <button class="btn exchange-item" data-diamond="0" data-coins="300">á€œá€²á€™á€Šá€º</button>
        </div>
        <div class="exchange-card">
          <img src="https://iili.io/KhdKQGs.jpg">
          <p>HSI 300 Coins - 100 á€šá€±á€¬á€€á€ºá€á€¬á€œá€²á€”á€­á€¯á€„á€º</p>
          <button class="btn exchange-item" data-diamond="0" data-coins="300">á€œá€²á€™á€Šá€º</button>
        </div>
        <div class="exchange-card">
          <img src="https://iili.io/Khdqlgj.jpg">
          <p>OPS 1000 Coins - 10 á€šá€±á€¬á€€á€ºá€á€¬á€œá€²á€”á€­á€¯á€„á€º</p>
          <button class="btn exchange-item" data-diamond="0" data-coins="1000">á€œá€²á€™á€Šá€º</button>
        </div>
        <div class="exchange-card">
          <img src="https://iili.io/KhdB1Gn.jpg">
          <p>PKJ 1000 Coins - 10 á€šá€±á€¬á€€á€ºá€á€¬á€œá€²á€”á€­á€¯á€„á€º</p>
          <button class="btn exchange-item" data-diamond="0" data-coins="1000">á€œá€²á€™á€Šá€º</button>
        </div>
        <div class="exchange-card">
          <img src="https://iili.io/KhdC0NV.jpg">
          <p>UHF 2000 Coins - 2 á€šá€±á€¬á€€á€ºá€á€¬á€œá€²á€”á€­á€¯á€„á€º</p>
          <button class="btn exchange-item" data-diamond="0" data-coins="2000">á€œá€²á€™á€Šá€º</button>
        </div>
        <div class="exchange-card">
          <img src="https://iili.io/Khdo5yx.jpg">
          <p>WDS 2000 Coins - 3 á€šá€±á€¬á€€á€ºá€á€¬á€œá€²á€”á€­á€¯á€„á€º</p>
          <button class="btn exchange-item" data-diamond="0" data-coins="2000">á€œá€²á€™á€Šá€º</button>
        </div>
        <div class="exchange-card">
          <img src="https://iili.io/KhdzqsS.jpg">
          <p>HHS 2000 Coins - 4 á€šá€±á€¬á€€á€ºá€á€¬á€œá€²á€”á€­á€¯á€„á€º</p>
          <button class="btn exchange-item" data-diamond="0" data-coins="2000">á€œá€²á€™á€Šá€º</button>
        </div>
        <div class="exchange-card">
          <img src="https://iili.io/KhdIE67.jpg">
          <p>OJS 2000 Coins - 2 á€šá€±á€¬á€€á€ºá€á€¬á€œá€²á€”á€­á€¯á€„á€º</p>
          <button class="btn exchange-item" data-diamond="0" data-coins="2000">á€œá€²á€™á€Šá€º</button>
        </div>
        <div class="exchange-card">
          <img src="https://iili.io/Khdu9g1.jpg">
          <p>KJN 2000 Coins - 10 á€šá€±á€¬á€€á€ºá€á€¬á€œá€²á€”á€­á€¯á€„á€º</p>
          <button class="btn exchange-item" data-diamond="0" data-coins="2000">á€œá€²á€™á€Šá€º</button>
        </div>
        <div class="exchange-card">
          <img src="https://iili.io/KhdAd4S.jpg">
          <p>PLY 2000 Coins - 2 á€šá€±á€¬á€€á€ºá€á€¬á€œá€²á€”á€­á€¯á€„á€º</p>
          <button class="btn exchange-item" data-diamond="0" data-coins="2000">á€œá€²á€™á€Šá€º</button>
        </div>
        <div class="exchange-card">
          <img src="https://iili.io/Khd7Cjs.jpg">
          <p>RRE 2000 Coins - 2 á€šá€±á€¬á€€á€ºá€á€¬á€œá€²á€”á€­á€¯á€„á€º</p>
          <button class="btn exchange-item" data-diamond="0" data-coins="2000">á€œá€²á€™á€Šá€º</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Anime Girl Section (Initially Visible) -->
  <div id="exchange-chat-container">
    <div id="exchange-chat-text"></div>
    <img id="exchange-chat-icon" src="https://iili.io/KjAUXPR.png" alt="Anime Girl">
  </div>
</div>





<!-- Battle Screen (New Full Version) -->
<div id="battle-screen-new" style="display:none; width:100vw; height:100vh;
  background-image:url('https://iili.io/KhiJuUu.jpg');
  background-size:cover; background-position:center; position:fixed; top:0; left:0; z-index:1000;">

  <button class="back-btn" id="back-battle-new">Home</button>

  <!-- á€¡á€•á€±á€«á€º Box -->
  <div style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
              width:220px; height:220px; background:url('https://iili.io/Khi3X5u.png') center/contain no-repeat;">
  </div>

<!-- á€–á€±á€¬á€€á€ºá€™á€Šá€ºá€á€œá€¯á€•á€º (á€”á€Šá€ºá€¸á€”á€Šá€ºá€¸á€œá€±á€¸á€á€„á€º) -->
<button id="open-token-btn" class="btn"
        style="position:absolute; bottom:120px; left:50%; transform:translateX(-50%);
               font-size:15px; padding:8px 20px; border-radius:8px;">
  á€–á€±á€¬á€€á€ºá€™á€Šá€º
</button>

  <!-- á€€á€»á€”á€ºá€›á€¾á€­á€á€±á€¬ á€–á€±á€¬á€€á€ºá€á€½á€„á€·á€ºá€¡á€›á€±á€¡á€á€½á€€á€ºá€•á€¼á€™á€šá€·á€º Display -->
  <div id="battle-tries" style="position:absolute; bottom:60px; left:50%; transform:translateX(-50%); 
                 text-align:center; color:white; font-size:14px; background:rgba(0,0,0,0.7); 
                 padding:8px 12px; border-radius:8px; width:90%; max-width:350px;">
    Loading...
  </div>

  <!-- á€›á€œá€’á€ºá€•á€¼ popup -->
  <div id="token-result" 
       style="display:none; position:absolute; top:0; left:0; width:100%; height:100%;
              background:rgba(0,0,0,0.8); color:white; 
              flex-direction:column; justify-content:center; align-items:center; z-index:2000;">
    <img id="token-result-img" src="" style="width:100px; height:100px; margin-bottom:10px;">
    <div id="token-result-text" style="font-size:20px; margin-bottom:10px;"></div>
    <button id="token-result-close" class="btn">á€Ÿá€¯á€á€ºá€•á€¼á€®</button>
  </div>
</div>

<!-- Exchange Form -->
<div class="exchange-form" id="exchange-form">
  <h3>á€œá€²á€™á€Šá€º</h3>
  <div class="form-group">
    <label for="game-id">Game ID</label>
    <input type="text" id="game-id" placeholder="á€á€„á€·á€º Game ID á€‘á€Šá€·á€ºá€•á€«">
  </div>
  <div class="form-group">
    <label for="server-id">Server ID</label>
    <input type="text" id="server-id" placeholder="á€á€„á€·á€º Server ID á€‘á€Šá€·á€ºá€•á€«">
  </div>
  <div class="form-group">
    <p id="exchange-details">5 Diamond á€¡á€á€½á€€á€º 1500 Coins á€œá€­á€¯á€¡á€•á€ºá€•á€«á€á€Šá€º</p>
  </div>
  <div class="form-buttons">
    <button class="confirm-btn" id="confirm-exchange">á€¡á€á€Šá€ºá€•á€¼á€¯á€™á€Šá€º</button>
    <button class="cancel-btn" id="cancel-exchange">á€™á€œá€²á€á€±á€¬á€·á€•á€«</button>
  </div>
</div>

<!-- Telegram Success Message -->
<div class="telegram-success" id="telegram-success">
  <h3>á€œá€²á€œá€¾á€Šá€ºá€™á€¾á€¯ á€¡á€±á€¬á€„á€ºá€™á€¼á€„á€ºá€•á€«á€á€Šá€º!</h3>
  <p>á€á€„á€·á€ºá€›á€²á€· á€œá€²á€œá€¾á€Šá€ºá€™á€¾á€¯á€¡á€á€»á€€á€ºá€¡á€œá€€á€ºá€™á€»á€¬á€¸á€€á€­á€¯á€•á€­á€¯á€·á€•á€¼á€®á€¸á€•á€«á€•á€¼á€®á‹</p>
  <p>á€€á€»á€±á€¸á€‡á€°á€¸á€•á€¼á€¯á á€…á€±á€¬á€„á€·á€ºá€†á€­á€¯á€„á€ºá€¸á€•á€±á€¸á€•á€«á‹</p>
  <button class="btn" id="close-success" style="margin-top:15px;">á€Ÿá€¯á€á€ºá€•á€¼á€®</button>
</div>

<script>
  // DOM Elements
  const eventBtn = document.getElementById('event-btn');
  const exchangeBtn = document.getElementById('exchange-btn');
  const taskBtn = document.getElementById('task-btn');
  const mainScreen = document.getElementById('main-screen');
  const eventScreen = document.getElementById('event-screen');
  const exchangeScreen = document.getElementById('exchange-screen');
  const taskScreen = document.getElementById('task-screen');
  const openBtn = document.getElementById('open-btn');
  const backBtn = document.getElementById('back-btn');
  const backExchange = document.getElementById('back-exchange');
  const backTask = document.getElementById('back-task');
  const tokenCountElem = document.getElementById('token-count');
  const coinCountElem = document.getElementById('coin-count');
  const rewardPopup = document.getElementById('reward-popup');
  const rewardImg = document.getElementById('reward-img');
  const rewardText = document.getElementById('reward-text');
  const screen2Gif = document.getElementById('screen2-gif');
  const exchangeForm = document.getElementById('exchange-form');
  const telegramSuccess = document.getElementById('telegram-success');
  const gameIdInput = document.getElementById('game-id');
  const serverIdInput = document.getElementById('server-id');
  const exchangeDetails = document.getElementById('exchange-details');
  const confirmExchange = document.getElementById('confirm-exchange');
  const cancelExchange = document.getElementById('cancel-exchange');
  const closeSuccess = document.getElementById('close-success');

  // Countdown timer elements
  const countdownHours = document.getElementById('countdown-hours');
  const countdownMinutes = document.getElementById('countdown-minutes');
  const countdownSeconds = document.getElementById('countdown-seconds');
  const countdownTimer = document.getElementById('countdown-timer');
  const readyToClaim = document.getElementById('ready-to-claim');

  // Task buttons
  const btn3hour = document.getElementById('btn-3hour');
  const btnChannel1 = document.getElementById('btn-channel1');
  const btnChannel2 = document.getElementById('btn-channel2');
  const btnChannel3 = document.getElementById('btn-channel3');
  const btnChannel4 = document.getElementById('btn-channel4');

  // NEW task buttons
  const btnYoutube = document.getElementById('btn-youtube');
  const btnShare = document.getElementById('btn-share');

  // Game State
  let tokens = parseInt(localStorage.getItem('tokens')) || 0;
  let coins = parseInt(localStorage.getItem('coins')) || 0;
  let currentExchange = null;

  // Task completion state
  let completedTasks = JSON.parse(localStorage.getItem('completedTasks')) || {
    '3hour': false,
    'channel1': false,
    'channel2': false,
    'channel3': false,
    'channel4': false,
    'youtube': false,
    'share': false
  };

  // Timer state
  let lastTokenTime = parseInt(localStorage.getItem('lastTokenTime')) || 0;
  const TOKEN_COOLDOWN = 3 * 60 * 60 * 1000; // 3 hours in milliseconds

  const rewards = [
    {value:10, chance:80, img:'https://iili.io/KVzp01S.png'},
    {value:20, chance:70, img:'https://iili.io/KVzp01S.png'},
    {value:30, chance:60, img:'https://iili.io/KVzp01S.png'},
    {value:50, chance:50, img:'https://iili.io/KVzp01S.png'},
    {value:70, chance:40, img:'https://iili.io/KVzp01S.png'},
    {value:100,chance:10, img:'https://iili.io/KVzp01S.png'}
  ];

  // Initialize game state
  function initializeGame() {
    tokenCountElem.textContent = tokens;
    coinCountElem.textContent = coins;

    // Update task states
    updateTaskStates();

    // Start timer for 3-hour task
    updateTaskTimer();
    setInterval(updateTaskTimer, 1000);
  }

  // Update task completion states
  function updateTaskStates() {
    if (completedTasks['3hour']) {
      document.getElementById('task-3hour').classList.add('task-completed');
      btn3hour.textContent = 'á€šá€°á€•á€¼á€®á€¸á€•á€¼á€®';
      btn3hour.disabled = true;
    }

    if (completedTasks['channel1']) {
      document.getElementById('task-channel1').classList.add('task-completed');
      btnChannel1.textContent = 'á€œá€¯á€•á€ºá€•á€¼á€®á€¸á€•á€¼á€®';
      btnChannel1.disabled = true;
    }

    if (completedTasks['channel2']) {
      document.getElementById('task-channel2').classList.add('task-completed');
      btnChannel2.textContent = 'á€œá€¯á€•á€ºá€•á€¼á€®á€¸á€•á€¼á€®';
      btnChannel2.disabled = true;
    }

    if (completedTasks['channel3']) {
      document.getElementById('task-channel3').classList.add('task-completed');
      btnChannel3.textContent = 'á€œá€¯á€•á€ºá€•á€¼á€®á€¸á€•á€¼á€®';
      btnChannel3.disabled = true;
    }

    if (completedTasks['channel4']) {
      document.getElementById('task-channel4').classList.add('task-completed');
      btnChannel4.textContent = 'á€œá€¯á€•á€ºá€•á€¼á€®á€¸á€•á€¼á€®';
      btnChannel4.disabled = true;
    }

    // NEW tasks state
    if (completedTasks['youtube']) {
      document.getElementById('task-youtube').classList.add('task-completed');
      btnYoutube.textContent = 'á€œá€¯á€•á€ºá€•á€¼á€®á€¸á€•á€¼á€®';
      btnYoutube.disabled = true;
    }
    if (completedTasks['share']) {
      document.getElementById('task-share').classList.add('task-completed');
      btnShare.textContent = 'á€œá€¯á€•á€ºá€•á€¼á€®á€¸á€•á€¼á€®';
      btnShare.disabled = true;
    }
  }

  // Update timer for 3-hour task ONLY in task screen
  function updateTaskTimer() {
    const now = Date.now();
    const timePassed = now - lastTokenTime;
    const timeRemaining = TOKEN_COOLDOWN - timePassed;

    if (timeRemaining <= 0) {
      // Timer finished - ready to claim
      countdownTimer.style.display = 'none';
      readyToClaim.style.display = 'block';
      btn3hour.disabled = false;
      btn3hour.textContent = 'Token Card á€›á€šá€°á€™á€Šá€º';
    } else {
      // Timer still running
      countdownTimer.style.display = 'flex';
      readyToClaim.style.display = 'none';

      const hours = Math.floor(timeRemaining / (1000 * 60 * 60));
      const minutes = Math.floor((timeRemaining % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((timeRemaining % (1000 * 60)) / 1000);

      // Update countdown display
      countdownHours.textContent = hours.toString().padStart(2, '0');
      countdownMinutes.textContent = minutes.toString().padStart(2, '0');
      countdownSeconds.textContent = seconds.toString().padStart(2, '0');

      btn3hour.textContent = 'á€™á€›á€á€±á€¸á€•á€«';
      btn3hour.disabled = true;
    }
  }

  // Save game state to localStorage
  function saveGameState() {
    localStorage.setItem('tokens', tokens);
    localStorage.setItem('coins', coins);
    localStorage.setItem('completedTasks', JSON.stringify(completedTasks));
    localStorage.setItem('lastTokenTime', lastTokenTime);
  }

  // Screen Navigation
  eventBtn.addEventListener('click', ()=>{
    mainScreen.style.display='none';
    eventScreen.style.display='block';
  });

  taskBtn.addEventListener('click', ()=>{
    mainScreen.style.display='none';
    taskScreen.style.display='block';
  });

  exchangeBtn.addEventListener('click', ()=>{
    mainScreen.style.display='none';
    exchangeScreen.style.display='block';
  });

  backBtn.addEventListener('click', ()=>{
    eventScreen.style.display='none';
    mainScreen.style.display='block';
  });

  backTask.addEventListener('click', ()=>{
    taskScreen.style.display='none';
    mainScreen.style.display='block';
  });

  backExchange.addEventListener('click', ()=>{
    exchangeScreen.style.display='none';
    mainScreen.style.display='block';
  });

  // Event Box Opening
  function getReward(){
    const totalChance = rewards.reduce((sum,r)=>sum+r.chance,0);
    let rand = Math.random()*totalChance;
    for(let r of rewards){
      if(rand < r.chance) return r;
      rand -= r.chance;
    }
    return rewards[0];
  }

  openBtn.addEventListener('click', ()=>{
    if(tokens<=0){alert('Token Card á€™á€œá€¯á€¶á€œá€±á€¬á€€á€ºá€•á€«!');return;}
    tokens--; 
    tokenCountElem.textContent = tokens;
    saveGameState();

    screen2Gif.style.display = 'block';
    setTimeout(()=>{
      screen2Gif.style.display = 'none';
      const reward = getReward();
      coins += reward.value;
      coinCountElem.textContent = coins;
      rewardImg.src = reward.img;
      rewardText.textContent = `+${reward.value} Coin`;
      rewardPopup.style.display='flex';
      saveGameState();
    },2000);
  });

  document.getElementById('close-reward').addEventListener('click', ()=>{
    rewardPopup.style.display='none';
  });

  // Task System
  btn3hour.addEventListener('click', () => {
    if (completedTasks['3hour']) {
      // Reset for next claim
      completedTasks['3hour'] = false;
    }

    tokens += 1;
    tokenCountElem.textContent = tokens;
    completedTasks['3hour'] = true;
    lastTokenTime = Date.now();

    document.getElementById('task-3hour').classList.add('task-completed');
    btn3hour.textContent = 'á€šá€°á€•á€¼á€®á€¸á€•á€¼á€®';
    btn3hour.disabled = true;

    // Reset timer display
    countdownTimer.style.display = 'flex';
    readyToClaim.style.display = 'none';

    saveGameState();
    alert('1 Token á€›á€›á€¾á€­á€•á€«á€á€Šá€º! á€”á€±á€¬á€€á€º áƒ á€”á€¬á€›á€®á€€á€¼á€¬á€•á€«á€€ á€‘á€•á€ºá€™á€¶á€›á€›á€¾á€­á€™á€Šá€º');
  });

  btnChannel1.addEventListener('click', () => {
    if (completedTasks['channel1']) return;

    window.open('https://t.me/StarlarCompany', '_blank');

    // Simulate user joining channel (in real app, you'd verify this)
    setTimeout(() => {
      tokens += 5;
      tokenCountElem.textContent = tokens;
      completedTasks['channel1'] = true;

      document.getElementById('task-channel1').classList.add('task-completed');
      btnChannel1.textContent = 'á€œá€¯á€•á€ºá€•á€¼á€®á€¸á€•á€¼á€®';
      btnChannel1.disabled = true;

      saveGameState();
      alert('Channel Join á€•á€¼á€®á€¸ 5 Token Card á€›á€›á€¾á€­á€•á€«á€á€Šá€º!');
    }, 1000);
  });

  btnChannel2.addEventListener('click', () => {
    if (completedTasks['channel2']) return;

    window.open('https://t.me/stw27925', '_blank');

    setTimeout(() => {
      tokens += 5;
      tokenCountElem.textContent = tokens;
      completedTasks['channel2'] = true;

      document.getElementById('task-channel2').classList.add('task-completed');
      btnChannel2.textContent = 'á€œá€¯á€•á€ºá€•á€¼á€®á€¸á€•á€¼á€®';
      btnChannel2.disabled = true;

      saveGameState();
      alert('Channel Join á€•á€¼á€®á€¸ 5 Token Card á€›á€›á€¾á€­á€•á€«á€á€Šá€º!');
    }, 1000);
  });

  btnChannel3.addEventListener('click', () => {
    if (completedTasks['channel3']) return;

    window.open('https://t.me/calvin2k78', '_blank');

    setTimeout(() => {
      tokens += 5;
      tokenCountElem.textContent = tokens;
      completedTasks['channel3'] = true;

      document.getElementById('task-channel3').classList.add('task-completed');
      btnChannel3.textContent = 'á€œá€¯á€•á€ºá€•á€¼á€®á€¸á€•á€¼á€®';
      btnChannel3.disabled = true;

      saveGameState();
      alert('Channel Join á€•á€¼á€®á€¸ 5 Token Card á€›á€›á€¾á€­á€•á€«á€á€Šá€º!');
    }, 1000);
  });

  btnChannel4.addEventListener('click', () => {
    if (completedTasks['channel4']) return;

    window.open('https://t.me/MythicMart_2', '_blank');

    setTimeout(() => {
      tokens += 5;
      tokenCountElem.textContent = tokens;
      completedTasks['channel4'] = true;

      document.getElementById('task-channel4').classList.add('task-completed');
      btnChannel4.textContent = 'á€œá€¯á€•á€ºá€•á€¼á€®á€¸á€•á€¼á€®';
      btnChannel4.disabled = true;

      saveGameState();
      alert('Channel Join á€•á€¼á€®á€¸ 5 Token Card á€›á€›á€¾á€­á€•á€«á€á€Šá€º!');
    }, 1000);
  });

  // NEW: YouTube Subscribe Task
  btnYoutube.addEventListener('click', () => {
    if (completedTasks['youtube']) return;
    window.open('https://youtube.com/@starlar.1?si=MXHDQE_quqeRN7pA', '_blank');
    setTimeout(() => {
      tokens += 3;
      tokenCountElem.textContent = tokens;
      completedTasks['youtube'] = true;
      document.getElementById('task-youtube').classList.add('task-completed');
      btnYoutube.textContent = 'á€œá€¯á€•á€ºá€•á€¼á€®á€¸á€•á€¼á€®';
      btnYoutube.disabled = true;
      saveGameState();
      alert('YouTube Subscribe á€•á€¼á€®á€¸ 3 Token Card á€›á€›á€¾á€­á€•á€«á€á€Šá€º!');
    }, 1000);
  });

  // NEW: Telegram Share Task
  let shareCount = parseInt(localStorage.getItem('shareCount')) || 0;
  btnShare.addEventListener('click', () => {
    if (completedTasks['share']) return;
    // open Telegram share intent
    window.open('https://t.me/share/url?url=https://starlar1.github.io/Event1/&text=MLBB Diamonds á€™á€»á€¬á€¸á€€á€­á€¯ á€¡á€á€™á€²á€·á€›á€šá€°á€›á€”á€º Event á€á€½á€„á€ºá€•á€«á€á€„á€ºá€œá€­á€¯á€€á€ºá€•á€« ğŸ’', '_blank');
    shareCount++;
    localStorage.setItem('shareCount', shareCount);
    if (shareCount >= 3) {
      tokens += 3;
      tokenCountElem.textContent = tokens;
      completedTasks['share'] = true;
      document.getElementById('task-share').classList.add('task-completed');
      btnShare.textContent = 'á€œá€¯á€•á€ºá€•á€¼á€®á€¸á€•á€¼á€®';
      btnShare.disabled = true;
      saveGameState();
      alert('Telegram á€á€½á€„á€º 3 á€á€« Share á€•á€¼á€®á€¸ 3 Token á€›á€›á€¾á€­á€•á€«á€á€Šá€º!');
    } else {
      alert(`Share ${shareCount}/3 á€•á€¼á€®á€¸á€•á€«á€•á€¼á€®á‹ áƒ á€á€« á€•á€¼á€®á€¸á€™á€¾ 3 Token Card á€›á€›á€¾á€­á€™á€Šá€º`);
    }
  });

  // Exchange System
  document.querySelectorAll('.exchange-item').forEach(button => {
  button.addEventListener('click', function() {
    const card = this.closest('.exchange-card');
    const itemName = card.querySelector('p').innerText; // âœ… Item Name

    const diamond = this.getAttribute('data-diamond');
    const coinCost = this.getAttribute('data-coins');

    if(coins < coinCost) {
      alert('Coin Card á€™á€œá€¯á€¶á€œá€±á€¬á€€á€ºá€•á€«!');
      return;
    }

    currentExchange = {diamond, coinCost, itemName};
    exchangeDetails.textContent = `${diamond} Diamond á€¡á€á€½á€€á€º ${coinCost} Coins á€œá€­á€¯á€¡á€•á€ºá€•á€«á€á€Šá€º`;
    exchangeForm.style.display = 'block';
  });
});

  cancelExchange.addEventListener('click', () => {
    exchangeForm.style.display = 'none';
    currentExchange = null;
  });

  confirmExchange.addEventListener('click', () => {
    const gameId = gameIdInput.value.trim();
    const serverId = serverIdInput.value.trim();

    if(!gameId || !serverId) {
      alert('Game ID á€”á€¾á€„á€·á€º Server ID á€‘á€Šá€·á€ºá€á€½á€„á€ºá€¸á€•á€±á€¸á€•á€«!');
      return;
    }

    // Deduct coins
    coins -= parseInt(currentExchange.coinCost);
    coinCountElem.textContent = coins;

    // Send to Telegram
    sendToTelegram(gameId, serverId, currentExchange.diamond, currentExchange.coinCost, currentExchange.itemName);

    // Show success message
    exchangeForm.style.display = 'none';
    telegramSuccess.style.display = 'block';

    // Reset form
    gameIdInput.value = '';
    serverIdInput.value = '';
    currentExchange = null;

    saveGameState();
  });

  closeSuccess.addEventListener('click', () => {
    telegramSuccess.style.display = 'none';
  });

// Telegram Integration
function sendToTelegram(gameId, serverId, diamond, coinCost, itemName) {
  const botToken = '8094270595:AAERziCUrOYf38DMOSReu1oOSEf2LLG_qS0';
  const chatId = '@WinnerEvent';

  const message = `ğŸ”„ á€œá€²á€œá€¾á€Šá€ºá€™á€¾á€¯á€¡á€á€…á€º\n\nğŸ“¦ Item: ${itemName}\nGame ID: ${gameId}\nServer ID: ${serverId}\nDiamond: ${diamond}\nCoins: ${coinCost}\n\nğŸ•’ ${new Date().toLocaleString()}`;

  fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
    method: 'POST',
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify({chat_id: chatId, text: message})
  }).catch(err => console.error('Telegram error:', err));
}

  // Initialize the game
  initializeGame();

  // á€•á€¼á€±á€¬á€„á€ºá€¸á€™á€šá€·á€ºá€…á€¬á€™á€»á€¬á€¸
  const chatTexts = [
    "Event á€€á€”á€± Diamonds á€á€½á€±á€›á€šá€°á€œá€­á€¯á€€á€ºá€•á€« ğŸ’",
    "Token á€™á€»á€¬á€¸á€›á€›á€¾á€­á€›á€”á€º Tasks á€™á€»á€¬á€¸á€œá€¯á€•á€ºá€•á€« ",
    "á€™á€¼á€”á€ºá€™á€¬á€”á€­á€¯á€„á€ºá€„á€¶á€€ á€á€á€„á€ºá€¸á€€á€»á€½á€á€ºá€™á€¾á€¬á€•á€»á€±á€¬á€ºá€”á€­á€¯á€„á€ºá€•á€«á€…á€± ğŸ‡²ğŸ‡²",
    "á€™á€„á€ºá€¸á€á€»á€…á€ºá€á€°á€€á€­á€¯á€…á€±á€¬á€„á€·á€ºá€™á€”á€±á€•á€«á€”á€²á€·á€á€°á€•á€¼á€”á€ºá€™á€œá€¬á€•á€«á€˜á€°á€¸ ğŸ’”",
    "á€¡á€á€”á€ºá€™á€¬á€†á€¯á€¶á€¸á€–á€¼á€…á€ºá€–á€­á€¯á€· á€›á€„á€ºá€¸á€€á€™á€¾á€¬á€á€½á€±á€›á€¾á€­á€á€šá€º ğŸ’ª"
  ];

  const chatTextElem = document.getElementById("chat-text");
  let chatIndex = 0;
  let charIndex = 0;

  // á€…á€¬á€›á€­á€¯á€€á€ºá€á€œá€­á€¯ á€•á€±á€«á€ºá€¡á€±á€¬á€„á€º function
  function typeText() {
    const currentText = chatTexts[chatIndex];
    if (charIndex < currentText.length) {
      chatTextElem.textContent += currentText.charAt(charIndex);
      charIndex++;
      setTimeout(typeText, 60); // á€…á€¬á€œá€¯á€¶á€¸á€›á€­á€¯á€€á€ºá€”á€¾á€¯á€”á€ºá€¸ (á€™á€¼á€”á€º/á€”á€¾á€±á€¸ á€•á€¼á€„á€ºá€œá€­á€¯á€·á€›)
    } else {
      // á€…á€¬á€¡á€•á€¼á€®á€¸á€›á€±á€¬á€€á€ºá€›á€„á€º á… á€…á€€á€¹á€€á€”á€·á€ºá€”á€²á€· á€•á€¼á€±á€¬á€„á€ºá€¸
      setTimeout(changeChatText, 5000);
    }
  }

  // á€…á€¬á€•á€¼á€±á€¬á€„á€ºá€¸ function
  function changeChatText() {
    chatIndex = (chatIndex + 1) % chatTexts.length;
    chatTextElem.textContent = ""; // á€…á€¬á€›á€¾á€„á€ºá€¸
    charIndex = 0;
    typeText(); // á€”á€±á€¬á€€á€ºá€…á€¬á€›á€­á€¯á€€á€º
  }

  // á€…á€á€„á€ºá€¡á€œá€¯á€•á€ºá€œá€¯á€•á€º
  typeText();

// ===== New Battle UI =====
const battleBtnNew = document.getElementById('battle-btn'); 
const battleScreenNew = document.getElementById('battle-screen-new');
const backBattleNew = document.getElementById('back-battle-new');
const openTokenBtn = document.getElementById('open-token-btn');
const tokenResult = document.getElementById('token-result');
const tokenResultImg = document.getElementById('token-result-img');
const tokenResultText = document.getElementById('token-result-text');
const tokenResultClose = document.getElementById('token-result-close');
const battleTriesElem = document.getElementById('battle-tries');

let battleTry = parseInt(localStorage.getItem('battleTry')) || 0;
let lastBattleTime = parseInt(localStorage.getItem('lastBattleTime')) || Date.now();
const BATTLE_LIMIT_TIME = 5 * 60 * 60 * 1000; // 5 á€”á€¬á€›á€®
const BATTLE_LIMIT_COUNT = 3;

function resetBattleLimit() {
  const now = Date.now();
  if (now - lastBattleTime >= BATTLE_LIMIT_TIME) {
    battleTry = 0;
    lastBattleTime = now;
    localStorage.setItem('battleTry', battleTry);
    localStorage.setItem('lastBattleTime', lastBattleTime);
  }
}

function updateBattleDisplay() {
  resetBattleLimit();
  const remainingTries = BATTLE_LIMIT_COUNT - battleTry;
  
  if (battleTry < BATTLE_LIMIT_COUNT) {
    battleTriesElem.textContent = `âœ… á€–á€±á€¬á€€á€ºá€á€½á€„á€·á€º ${remainingTries} á€€á€¼á€­á€™á€º á€€á€»á€”á€ºá€›á€¾á€­á€•á€«á€á€Šá€º`;
    openTokenBtn.disabled = false;
  } else {
    battleTriesElem.textContent = `âŒ  á… á€”á€¬á€›á€®á€…á€±á€¬á€„á€·á€ºá€•á€«`;
    openTokenBtn.disabled = true;
  }
}

// á€…á€¬á€™á€»á€€á€ºá€”á€¾á€¬á€…á€á€„á€ºá€œá€¯á€•á€ºá€†á€±á€¬á€„á€ºá€á€»á€­á€”á€º reset
resetBattleLimit();

// Navigation
battleBtnNew.addEventListener('click', ()=>{
  mainScreen.style.display='none';
  battleScreenNew.style.display='block';
  updateBattleDisplay();
});

backBattleNew.addEventListener('click', ()=>{
  battleScreenNew.style.display='none';
  mainScreen.style.display='block';
});

// á€–á€±á€¬á€€á€º Button
openTokenBtn.addEventListener('click', ()=>{
  resetBattleLimit();
  if (battleTry >= BATTLE_LIMIT_COUNT) {
    alert('âŒ á… á€”á€¬á€›á€®á€¡á€á€½á€„á€ºá€¸ áƒ á€á€«á€á€¬ á€–á€±á€¬á€€á€ºá€á€½á€„á€·á€ºá€›á€¾á€­á€•á€«á€á€Šá€º!');
    return;
  }

  battleTry++;
  lastBattleTime = Date.now();
  localStorage.setItem('battleTry', battleTry);
  localStorage.setItem('lastBattleTime', lastBattleTime);

  // Random Token 1/2/3/5
  const rewards = [1, 2, 3, 5];
  const reward = rewards[Math.floor(Math.random() * rewards.length)];

  tokens += reward;
  tokenCountElem.textContent = tokens;
  saveGameState();

  // Popup á€•á€¼
  tokenResultImg.src = 'https://iili.io/KVxjsG1.png';
  tokenResultText.textContent = `+${reward} Token Card á€›á€›á€¾á€­á€•á€«á€á€Šá€º`;
  tokenResult.style.display = 'flex';

  // Display update
  updateBattleDisplay();
});

tokenResultClose.addEventListener('click', ()=>{
  tokenResult.style.display = 'none';
});

// áƒá€ á€…á€€á€¹á€€á€”á€·á€ºá€á€…á€ºá€á€« á€¡á€œá€­á€¯á€¡á€œá€»á€±á€¬á€€á€º á€…á€…á€ºá€†á€±á€¸
setInterval(updateBattleDisplay, 30000);


// Exchange Chat Typing Text (Home style)
const exchangeTexts = [
  `Coin Card á€–á€¼á€„á€·á€º á€œá€²á€™á€Šá€ºá€†á€­á€¯ á€”á€¾á€­á€•á€ºá€•á€« <span class="exchange-link" id="exchangeLink">á€œá€²á€™á€Šá€º</span> â¤ï¸ `,
  `Wp Pass á€€á€­á€¯ Coin Card 35000 á€”á€²á€·á€œá€²á€œá€­á€¯á€·á€›á€á€šá€ºá€”á€±á€¬á€º ğŸ’œ`,
  `á€œá€²á€–á€­á€¯á€· Coin Card á€™á€œá€±á€¬á€€á€ºá€›á€„á€º Tasks á€™á€»á€¬á€¸á€”á€¾á€„á€·á€º Green Box á€€á€šá€°á€•á€« ğŸ’›`,
  `á€šá€á€¯ Event á€€á€­á€¯á€‘á€¯á€á€ºá€á€°á€€ @Starlar1 á€•á€« á€á€°á€·á€…á€® á€¡á€œá€¯á€•á€ºá€€á€­á€… á€•á€¼á€±á€¬á€œá€­á€¯á€·á€›á€•á€«á€á€šá€º ğŸ©µ `
];

const exchangeChatText = document.getElementById("exchange-chat-text");
let exchangeIndex = 0;
let exchangeChar = 0;

function typeExchangeText() {
  const text = exchangeTexts[exchangeIndex];
  if (exchangeChar < text.length) {
    exchangeChatText.innerHTML = text.slice(0, exchangeChar + 1);
    exchangeChar++;
    setTimeout(typeExchangeText, 60);
  } else {
    // Add click listener when finished typing
    const exchangeLink = document.getElementById("exchangeLink");
    if (exchangeLink) {
      exchangeLink.addEventListener("click", () => {
        // Exchange Screen á€€á€­á€¯ á€•á€±á€«á€ºá€¡á€±á€¬á€„á€ºá€œá€¯á€•á€ºá€á€¼á€„á€ºá€¸
        mainScreen.style.display = 'none';
        exchangeScreen.style.display = 'block';
        
        // Anime and Background á€€á€­á€¯á€–á€»á€±á€¬á€€á€ºá€™á€šá€º
        document.getElementById("exchange-chat-container").style.display = "none";
        
        // Exchange items á€€á€­á€¯á€•á€¼á€™á€šá€º
        document.getElementById("exchange-items").style.display = "block";
      });
    }
    setTimeout(changeExchangeText, 4000);
  }
}

function changeExchangeText() {
  exchangeIndex = (exchangeIndex + 1) % exchangeTexts.length;
  exchangeChatText.innerHTML = "";
  exchangeChar = 0;
  typeExchangeText();
}

// á€…á€á€„á€ºá€œá€¯á€•á€º
typeExchangeText();

// Back button á€”á€¾á€­á€•á€ºá€›á€„á€º Anime á€•á€¼á€”á€ºá€•á€¼á€›á€”á€º
backExchange.addEventListener('click', ()=>{
  exchangeScreen.style.display='none';
  mainScreen.style.display='block';
  
  // Anime á€€á€­á€¯á€•á€¼á€”á€ºá€•á€¼á€›á€”á€º
  document.getElementById("exchange-chat-container").style.display = "flex";
  document.getElementById("exchange-items").style.display = "none";
});
</script>
</body>
</html>